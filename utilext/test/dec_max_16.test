#===============================================================================
#
# Written by: Mark Benningfield
#
# LICENSE: Public Domain -- see the file LICENSE.txt
#
#===============================================================================
#
# Tests for the multi-arg dec_max() function using UTF-16 database encoding
#
#===============================================================================

source errors.tcl
setup_16 db


test all_null_2 {(2-arg special case) Verify NULL return on NULL args} -body {
  return [elem0 [db eval {select dec_max(NULL, NULL);}]]
} -result NULL


test all_null {Verify NULL return on NULL args} -body {
  return [elem0 [db eval {select dec_max(NULL, NULL, NULL, NULL);}]]
} -result NULL


test any_null_2 {(2-arg special case) Verify NULL args are ignored with non-NULLS} -body {
  return [elem0 [db eval {select dec_max('3.2', NULL);}]]
} -result 3.2


test any_null {Verify NULL args are ignored with non-NULLS} -body {
  return [elem0 [db eval {select dec_max('3.2', '5.6', NULL, '7.9');}]]
} -result 7.9


test args_zero {Verify NULL return with zero arguments} -body {
  return [elem0 [db eval {select dec_max();}]]
} -result NULL


test args_one {Verify result with only one argument} -body {
  return [elem0 [db eval {select dec_max('2.56');}]]
} -result 2.56


test normal_2 {(2-arg special case) Take the max of 2 numbers} -body {
  return [elem0 [db eval {select dec_max('2.8', '6.3');}]]
} -result 6.3


test normal {Take the max of some numbers} -body {
  return [elem0 [db eval {select dec_max('6.4', '22.1', '7.4', '12.4');}]]
} -result 22.1


test invalid_2 {(2-arg special case) Verify error on non-numeric args} -body {
  db eval {select dec_max('235.235', 'fred');}
} -returnCodes 1 -result $SqliteFormat


test invalid {Verify error on non-numeric args} -body {
  db eval {select dec_max('231', '56.236', 'fred', '678.54333');}
} -returnCodes 1 -result $SqliteFormat


db close
tcltest::cleanupTests